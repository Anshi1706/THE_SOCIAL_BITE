<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - The Social Bite</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary: #6a11cb;
            --secondary: #2575fc;
            --accent: #ff3e6c;
            --success: #00d2b5;
            --warning: #ff9f43;
            --info: #2e86de;
            --light: #f8f9fa;
            --dark: #2c3e50;
            --card-bg: rgba(255, 255, 255, 0.9);
            --glass: rgba(255, 255, 255, 0.25);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        body {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: var(--dark);
            min-height: 100vh;
            padding-bottom: 2rem;
        }
        
        .navbar {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .navbar-brand {
            font-weight: 800;
            font-size: 1.6rem;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .page-title {
            color: white;
            font-weight: 800;
            margin-bottom: 2rem;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            position: relative;
            display: inline-block;
        }
        
        .page-title:after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--accent), var(--warning));
            border-radius: 2px;
        }
        
        .dashboard-card {
            background: var(--card-bg);
            border: none;
            border-radius: 16px;
            box-shadow: var(--shadow);
            transition: all 0.4s ease;
            overflow: hidden;
            height: 100%;
            backdrop-filter: blur(10px);
            position: relative;
            z-index: 1;
        }
        
        .dashboard-card:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            z-index: 2;
        }
        
        .dashboard-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }
        
        .dashboard-card .card-body {
            padding: 2rem 1.5rem;
            position: relative;
            z-index: 1;
        }
        
        .dashboard-card i {
            margin-bottom: 1.5rem;
            padding: 18px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: auto;
            margin-right: auto;
            color: white;
            font-size: 1.8rem;
            box-shadow: 0 4px 15px rgba(106, 17, 203, 0.3);
        }
        
        .dashboard-card h5 {
            font-weight: 700;
            margin-bottom: 0.75rem;
            color: var(--dark);
        }
        
        .dashboard-card p {
            color: #6c757d;
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
        }
        
        .dashboard-card .btn {
            border-radius: 30px;
            padding: 10px 25px;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        
        .stats-card {
            border: none;
            border-radius: 16px;
            color: white;
            text-align: center;
            padding: 1.8rem 1rem;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .stats-card:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0));
            z-index: 1;
        }
        
        .stats-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
        }
        
        .stats-card .content {
            position: relative;
            z-index: 2;
        }
        
        .stats-card h3 {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .stats-card p {
            margin-bottom: 0;
            font-size: 0.95rem;
            opacity: 0.9;
        }
        
        .content-card {
            border: none;
            border-radius: 16px;
            box-shadow: var(--shadow);
            background: var(--card-bg);
            margin-bottom: 2rem;
            backdrop-filter: blur(10px);
            overflow: hidden;
        }
        
        .content-card .card-header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-bottom: none;
            padding: 1.5rem 1.8rem;
            color: white;
        }
        
        .content-card .card-header h4 {
            color: white;
            font-weight: 700;
            margin: 0;
        }
        
        .content-card .card-body {
            padding: 1.8rem;
        }
        
        .order-card, .user-card, .restaurant-card {
            border: none;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 1.2rem;
            transition: all 0.3s ease;
            background: white;
        }
        
        .order-card:hover, .user-card:hover, .restaurant-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }
        
        .badge {
            font-weight: 600;
            padding: 6px 14px;
            border-radius: 20px;
        }
        
        .welcome-alert {
            border: none;
            border-radius: 16px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.7));
            backdrop-filter: blur(10px);
            color: var(--dark);
            box-shadow: var(--shadow);
            border-left: 4px solid var(--accent);
        }
        
        .welcome-alert i {
            color: var(--accent);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(37, 117, 252, 0.4);
        }
        
        .btn-success {
            background: linear-gradient(135deg, var(--success), #00a892);
            border: none;
        }
        
        .btn-warning {
            background: linear-gradient(135deg, var(--warning), #ff7e00);
            border: none;
            color: white;
        }
        
        .btn-info {
            background: linear-gradient(135deg, var(--info), #1b6ec2);
            border: none;
        }
        
        .stats-primary { background: linear-gradient(135deg, #6a11cb, #2575fc); }
        .stats-success { background: linear-gradient(135deg, #00d2b5, #00a892); }
        .stats-warning { background: linear-gradient(135deg, #ff9f43, #ff7e00); }
        .stats-info { background: linear-gradient(135deg, #2e86de, #1b6ec2); }
        
        .section-title {
            color: var(--dark);
            font-weight: 700;
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid rgba(106, 17, 203, 0.2);
        }
        
        .floating {
            animation: floating 3s ease-in-out infinite;
        }
        
        @keyframes floating {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(106, 17, 203, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(106, 17, 203, 0); }
            100% { box-shadow: 0 0 0 0 rgba(106, 17, 203, 0); }
        }
        
        .notification-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--accent);
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .modal-content {
            border-radius: 16px;
            border: none;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .modal-header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-radius: 16px 16px 0 0;
            border-bottom: none;
        }
        
        .table th {
            border-top: none;
            font-weight: 600;
            color: var(--dark);
        }
        
        .action-buttons .btn {
            margin-right: 5px;
            margin-bottom: 5px;
        }
        
        .search-box {
            border-radius: 30px;
            padding: 10px 20px;
            border: 1px solid #dee2e6;
        }
        
        .form-control:focus, .form-select:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 0.2rem rgba(106, 17, 203, 0.25);
        }
        
        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            .dashboard-card .card-body {
                padding: 1.5rem 1rem;
            }
            
            .content-card .card-body {
                padding: 1.5rem;
            }
            
            .stats-card {
                padding: 1.5rem 0.5rem;
            }
            
            .stats-card h3 {
                font-size: 2rem;
            }
            
            .action-buttons .btn {
                margin-bottom: 5px;
            }
        }
        
        /* Form validation styles */
        .is-invalid {
            border-color: #dc3545;
            box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25);
        }
        
        .invalid-feedback {
            display: none;
            width: 100%;
            margin-top: 0.25rem;
            font-size: 0.875em;
            color: #dc3545;
        }
        
        .was-validated .form-control:invalid ~ .invalid-feedback,
        .form-control.is-invalid ~ .invalid-feedback {
            display: block;
        }

        /* Toast notifications */
        .toast-container {
            z-index: 9999;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light sticky-top">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="fas fa-utensils me-2"></i> The Social Bite - Admin
            </a>
            <div class="navbar-nav ms-auto">
                <div class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="fas fa-user-circle me-1"></i> <span id="adminUserName">Admin User</span>
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="#" onclick="adminPanel.showSettings()"><i class="fas fa-cog me-2"></i>Settings</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#"><i class="fas fa-home me-2"></i>Back to Site</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#" onclick="logout()"><i class="fas fa-sign-out-alt me-2"></i>Logout</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <div class="container mt-4 mb-5">
        <h1 class="page-title text-center mb-5">Admin Dashboard</h1>
        
        <div class="row">
            <div class="col-md-3 mb-4">
                <div class="dashboard-card floating">
                    <div class="card-body text-center">
                        <i class="fas fa-utensils"></i>
                        <h5>Restaurants</h5>
                        <p class="text-muted">Manage restaurant listings</p>
                        <button class="btn btn-primary w-100 pulse" onclick="adminPanel.showSection('restaurants')">Manage</button>
                    </div>
                </div>
            </div>
            
            <div class="col-md-3 mb-4">
                <div class="dashboard-card floating" style="animation-delay: 0.2s;">
                    <div class="card-body text-center">
                        <i class="fas fa-shopping-cart"></i>
                        <h5>Orders</h5>
                        <p class="text-muted">View and manage orders</p>
                        <button class="btn btn-success w-100" onclick="adminPanel.showSection('orders')">View Orders</button>
                    </div>
                </div>
            </div>
            
            <div class="col-md-3 mb-4">
                <div class="dashboard-card floating" style="animation-delay: 0.4s;">
                    <div class="card-body text-center">
                        <i class="fas fa-users"></i>
                        <h5>Users</h5>
                        <p class="text-muted">Manage user accounts</p>
                        <button class="btn btn-warning w-100" onclick="adminPanel.showSection('users')">Manage Users</button>
                    </div>
                </div>
            </div>
            
            <div class="col-md-3 mb-4">
                <div class="dashboard-card floating" style="animation-delay: 0.6s;">
                    <div class="card-body text-center">
                        <i class="fas fa-chart-bar"></i>
                        <h5>Analytics</h5>
                        <p class="text-muted">View business insights</p>
                        <button class="btn btn-info w-100" onclick="adminPanel.showSection('analytics')">View Analytics</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="adminContent">
            <!-- Dynamic admin content will be loaded here -->
        </div>
    </div>

    <!-- Add User Modal -->
    <div class="modal fade" id="addUserModal" tabindex="-1" aria-labelledby="addUserModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addUserModalLabel">Add New User</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="userForm" class="needs-validation" novalidate>
                        <div class="mb-3">
                            <label for="userName" class="form-label">Full Name *</label>
                            <input type="text" class="form-control" id="userName" required>
                            <div class="invalid-feedback">
                                Please provide a user name.
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="userEmail" class="form-label">Email Address *</label>
                            <input type="email" class="form-control" id="userEmail" required>
                            <div class="invalid-feedback">
                                Please provide a valid email address.
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="userPassword" class="form-label">Password *</label>
                            <input type="password" class="form-control" id="userPassword" required>
                            <div class="invalid-feedback">
                                Please provide a password.
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="userRole" class="form-label">Role *</label>
                            <select class="form-select" id="userRole" required>
                                <option value="">Select Role</option>
                                <option value="customer">Customer</option>
                                <option value="admin">Admin</option>
                            </select>
                            <div class="invalid-feedback">
                                Please select a role.
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="userPhone" class="form-label">Phone Number</label>
                            <input type="tel" class="form-control" id="userPhone">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="adminPanel.saveUser()">Save User</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit User Modal -->
    <div class="modal fade" id="editUserModal" tabindex="-1" aria-labelledby="editUserModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editUserModalLabel">Edit User</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="editUserForm" class="needs-validation" novalidate>
                        <input type="hidden" id="editUserId">
                        <div class="mb-3">
                            <label for="editUserName" class="form-label">Full Name *</label>
                            <input type="text" class="form-control" id="editUserName" required>
                            <div class="invalid-feedback">
                                Please provide a user name.
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="editUserEmail" class="form-label">Email Address *</label>
                            <input type="email" class="form-control" id="editUserEmail" required>
                            <div class="invalid-feedback">
                                Please provide a valid email address.
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="editUserPassword" class="form-label">Password</label>
                            <input type="password" class="form-control" id="editUserPassword" placeholder="Leave blank to keep current password">
                        </div>
                        <div class="mb-3">
                            <label for="editUserRole" class="form-label">Role *</label>
                            <select class="form-select" id="editUserRole" required>
                                <option value="">Select Role</option>
                                <option value="customer">Customer</option>
                                <option value="admin">Admin</option>
                            </select>
                            <div class="invalid-feedback">
                                Please select a role.
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="editUserPhone" class="form-label">Phone Number</label>
                            <input type="tel" class="form-control" id="editUserPhone">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="adminPanel.updateUser()">Update User</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Restaurant Modal -->
    <div class="modal fade" id="addRestaurantModal" tabindex="-1" aria-labelledby="addRestaurantModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addRestaurantModalLabel">Add New Restaurant</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="restaurantForm">
                        <div class="mb-3">
                            <label for="restaurantName" class="form-label">Restaurant Name</label>
                            <input type="text" class="form-control" id="restaurantName">
                        </div>
                        <div class="mb-3">
                            <label for="restaurantCuisine" class="form-label">Cuisine Type</label>
                            <input type="text" class="form-control" id="restaurantCuisine">
                        </div>
                        <div class="mb-3">
                            <label for="restaurantLocation" class="form-label">Location</label>
                            <input type="text" class="form-control" id="restaurantLocation">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="adminPanel.saveRestaurant()">Save Restaurant</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container position-fixed top-0 end-0 p-3"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Admin Panel - Complete functionality
        class AdminPanel {
            constructor() {
                this.currentEditingUserId = null;
                this.currentEditingRestaurantId = null;
                this.init();
            }

            init() {
                // Check if user is admin
                if (!this.isAdmin()) {
                    window.location.href = 'index.html';
                    return;
                }
                
                this.updateUserDisplay();
                this.initializeSampleData();
                this.loadDashboard();
            }

            isAdmin() {
                // For demo purposes, always return true
                return true;
            }

            updateUserDisplay() {
                const adminNameElement = document.getElementById('adminUserName');
                if (adminNameElement) {
                    adminNameElement.textContent = 'Admin User';
                }
            }

            initializeSampleData() {
                // Initialize sample data if not exists
                if (!localStorage.getItem('users')) {
                    const sampleUsers = [
                        { 
                            id: 1,
                            name: "Admin User",
                            email: "admin@socialbite.com", 
                            password: "admin123",
                            phone: "+91 98765 43210",
                            address: "123 Admin Street, Kolkata",
                            role: "admin", 
                            createdAt: new Date().toISOString(),
                            status: "active"
                        },
                        { 
                            id: 2,
                            name: "John Doe", 
                            email: "john@example.com", 
                            password: "password123",
                            phone: "+91 98765 43211",
                            address: "456 Park Street, Kolkata",
                            role: "customer", 
                            createdAt: "2023-03-15",
                            status: "active"
                        },
                        { 
                            id: 3,
                            name: "Sarah Smith", 
                            email: "sarah@example.com", 
                            password: "password123",
                            phone: "+91 98765 43212",
                            address: "789 Lake Road, Kolkata",
                            role: "customer", 
                            createdAt: "2023-04-22",
                            status: "active"
                        }
                    ];
                    localStorage.setItem('users', JSON.stringify(sampleUsers));
                }

                if (!localStorage.getItem('restaurants')) {
                    const sampleRestaurants = [
                        {
                            id: 1,
                            name: "Spice Symphony",
                            cuisine: "Fusion",
                            location: "Downtown",
                            rating: 4.5,
                            deliveryTime: "35 mins",
                            description: "Creative fusion dishes in a vibrant atmosphere",
                            image: "https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",
                            status: "active"
                        },
                        {
                            id: 2,
                            name: "Urban Grill",
                            cuisine: "Barbecue",
                            location: "Central District",
                            rating: 4.4,
                            deliveryTime: "30 mins",
                            description: "Smoky grilled specialties and live music",
                            image: "https://images.unsplash.com/photo-1555396273-367ea4eb4db5?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",
                            status: "active"
                        }
                    ];
                    localStorage.setItem('restaurants', JSON.stringify(sampleRestaurants));
                }

                if (!localStorage.getItem('orders')) {
                    const sampleOrders = [
                        {
                            id: 1001,
                            userId: 2,
                            userName: "John Doe",
                            restaurantId: 1,
                            restaurantName: "Spice Symphony",
                            items: [
                                { name: "Butter Chicken", quantity: 1, price: 420 },
                                { name: "Garlic Naan", quantity: 2, price: 60 }
                            ],
                            total: 540,
                            status: "delivered",
                            date: new Date(Date.now() - 86400000).toISOString(),
                            deliveryAddress: "456 Park Street, Kolkata"
                        },
                        {
                            id: 1002,
                            userId: 2,
                            userName: "John Doe",
                            restaurantId: 2,
                            restaurantName: "Urban Grill",
                            items: [
                                { name: "BBQ Chicken Platter", quantity: 1, price: 450 }
                            ],
                            total: 450,
                            status: "preparing",
                            date: new Date().toISOString(),
                            deliveryAddress: "456 Park Street, Kolkata"
                        }
                    ];
                    localStorage.setItem('orders', JSON.stringify(sampleOrders));
                }
            }

            loadDashboard() {
                const stats = this.getAdminStats();
                const content = document.getElementById('adminContent');
                
                if (content) {
                    content.innerHTML = `
                        <div class="row mb-4">
                            <div class="col-md-3">
                                <div class="stats-card stats-primary">
                                    <div class="content">
                                        <h3>${stats.totalRestaurants}</h3>
                                        <p class="mb-0">Restaurants</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stats-card stats-success">
                                    <div class="content">
                                        <h3>${stats.totalOrders}</h3>
                                        <p class="mb-0">Total Orders</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stats-card stats-warning">
                                    <div class="content">
                                        <h3>${stats.totalUsers}</h3>
                                        <p class="mb-0">Users</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stats-card stats-info">
                                    <div class="content">
                                        <h3>₹${stats.totalRevenue}</h3>
                                        <p class="mb-0">Revenue</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="alert welcome-alert d-flex align-items-center">
                            <i class="fas fa-info-circle fa-2x me-3"></i>
                            <div>
                                <h5 class="mb-1">Welcome to the Admin Panel!</h5>
                                <p class="mb-0">Manage your restaurant platform with ease. Use the cards above to navigate different sections.</p>
                            </div>
                        </div>
                        
                        <div class="row mt-4">
                            <div class="col-md-8">
                                <div class="content-card">
                                    <div class="card-header">
                                        <h4><i class="fas fa-fire me-2"></i>Recent Activity</h4>
                                    </div>
                                    <div class="card-body">
                                        ${this.getRecentActivity()}
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="content-card h-100">
                                    <div class="card-header">
                                        <h4><i class="fas fa-bell me-2"></i>Notifications</h4>
                                    </div>
                                    <div class="card-body">
                                        ${this.getNotifications()}
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                }
            }

            getRecentActivity() {
                const orders = JSON.parse(localStorage.getItem('orders') || '[]');
                const recentOrders = orders.slice(-3).reverse();
                
                if (recentOrders.length === 0) {
                    return '<p class="text-muted text-center py-4">No recent activity</p>';
                }
                
                return recentOrders.map(order => `
                    <div class="d-flex mb-3">
                        <div class="flex-shrink-0">
                            <div class="bg-primary rounded-circle p-2 text-white">
                                <i class="fas fa-shopping-cart"></i>
                            </div>
                        </div>
                        <div class="flex-grow-1 ms-3">
                            <h6 class="mb-0">New order received</h6>
                            <p class="mb-0 text-muted">Order #${order.id} for ₹${order.total}</p>
                            <small class="text-muted">${this.formatTimeAgo(order.date)}</small>
                        </div>
                    </div>
                `).join('');
            }

            getNotifications() {
                const orders = JSON.parse(localStorage.getItem('orders') || '[]');
                const pendingOrders = orders.filter(order => order.status === 'confirmed' || order.status === 'preparing').length;
                
                return `
                    <div class="d-flex mb-3">
                        <div class="flex-shrink-0">
                            <i class="fas fa-exclamation-circle text-warning"></i>
                        </div>
                        <div class="flex-grow-1 ms-3">
                            <h6 class="mb-0">Pending orders</h6>
                            <p class="mb-0 text-muted">${pendingOrders} orders awaiting processing</p>
                        </div>
                    </div>
                    <div class="d-flex">
                        <div class="flex-shrink-0">
                            <i class="fas fa-chart-line text-success"></i>
                        </div>
                        <div class="flex-grow-1 ms-3">
                            <h6 class="mb-0">Performance</h6>
                            <p class="mb-0 text-muted">Revenue increased this week</p>
                        </div>
                    </div>
                `;
            }

            formatTimeAgo(dateString) {
                const date = new Date(dateString);
                const now = new Date();
                const diffMs = now - date;
                const diffMins = Math.floor(diffMs / 60000);
                const diffHours = Math.floor(diffMs / 3600000);
                const diffDays = Math.floor(diffMs / 86400000);
                
                if (diffMins < 1) return 'Just now';
                if (diffMins < 60) return `${diffMins} minutes ago`;
                if (diffHours < 24) return `${diffHours} hours ago`;
                return `${diffDays} days ago`;
            }

            getAdminStats() {
                const restaurants = JSON.parse(localStorage.getItem('restaurants') || '[]');
                const orders = JSON.parse(localStorage.getItem('orders') || '[]');
                const users = JSON.parse(localStorage.getItem('users') || '[]');
                
                return {
                    totalRestaurants: restaurants.length,
                    totalOrders: orders.length,
                    totalUsers: users.length,
                    totalRevenue: orders.reduce((sum, order) => sum + (order.total || 0), 0)
                };
            }

            showSection(section) {
                const content = document.getElementById('adminContent');
                if (!content) return;
                
                switch(section) {
                    case 'restaurants':
                        content.innerHTML = this.getRestaurantsManagement();
                        break;
                    case 'orders':
                        content.innerHTML = this.getOrdersManagement();
                        break;
                    case 'users':
                        content.innerHTML = this.getUsersManagement();
                        break;
                    case 'analytics':
                        content.innerHTML = this.getAnalytics();
                        break;
                    default:
                        this.loadDashboard();
                }
            }

            // USER MANAGEMENT - FIXED VERSION
            getUsersManagement() {
                const users = JSON.parse(localStorage.getItem('users') || '[]');
                
                return `
                    <div class="content-card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h4><i class="fas fa-users me-2"></i>Manage Users</h4>
                            <div class="d-flex flex-wrap">
                                <input type="text" class="form-control search-box me-2 mb-2" id="userSearch" placeholder="Search users..." onkeyup="adminPanel.searchUsers(this.value)">
                                <button class="btn btn-primary mb-2" onclick="adminPanel.openAddUserModal()">
                                    <i class="fas fa-plus me-2"></i>Add User
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            ${users.length === 0 ? `
                                <div class="text-center py-4">
                                    <i class="fas fa-users fa-3x text-muted mb-3"></i>
                                    <h5 class="text-muted">No Users Found</h5>
                                    <p class="text-muted">Get started by adding your first user.</p>
                                    <button class="btn btn-primary" onclick="adminPanel.openAddUserModal()">
                                        <i class="fas fa-plus me-2"></i>Add First User
                                    </button>
                                </div>
                            ` : `
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>User</th>
                                            <th>Email</th>
                                            <th>Role</th>
                                            <th>Joined</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="usersTableBody">
                                        ${users.map(user => `
                                            <tr>
                                                <td>
                                                    <div class="d-flex align-items-center">
                                                        <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px;">
                                                            <span class="text-white fw-bold">${user.name.charAt(0).toUpperCase()}</span>
                                                        </div>
                                                        <div>
                                                            <strong>${user.name}</strong>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td>${user.email}</td>
                                                <td>
                                                    <span class="badge bg-${user.role === 'admin' ? 'danger' : 'info'}">${user.role}</span>
                                                </td>
                                                <td>${new Date(user.createdAt).toLocaleDateString()}</td>
                                                <td>
                                                    <span class="badge bg-${user.status === 'active' ? 'success' : 'secondary'}">${user.status}</span>
                                                </td>
                                                <td class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary" onclick="adminPanel.editUser(${user.id})" title="Edit">
                                                        <i class="fas fa-edit"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-danger" onclick="adminPanel.deleteUser(${user.id})" title="Delete">
                                                        <i class="fas fa-trash"></i>
                                                    </button>
                                                    <button class="btn btn-sm ${user.status === 'active' ? 'btn-warning' : 'btn-success'}" onclick="adminPanel.toggleUserStatus(${user.id})" title="${user.status === 'active' ? 'Deactivate' : 'Activate'}">
                                                        <i class="fas ${user.status === 'active' ? 'fa-ban' : 'fa-check'}"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                        `).join('')}
                                    </tbody>
                                </table>
                            </div>
                            `}
                        </div>
                    </div>
                `;
            }

            openAddUserModal() {
                // Reset form
                document.getElementById('userForm').reset();
                document.getElementById('userForm').classList.remove('was-validated');
                
                // Show modal
                const modal = new bootstrap.Modal(document.getElementById('addUserModal'));
                modal.show();
            }

            saveUser() {
                const form = document.getElementById('userForm');
                
                if (!form.checkValidity()) {
                    form.classList.add('was-validated');
                    return;
                }
                
                const name = document.getElementById('userName').value;
                const email = document.getElementById('userEmail').value;
                const password = document.getElementById('userPassword').value;
                const role = document.getElementById('userRole').value;
                const phone = document.getElementById('userPhone').value;
                
                const users = JSON.parse(localStorage.getItem('users')) || [];
                
                // Check if user already exists
                if (users.find(u => u.email === email)) {
                    this.showToast('User with this email already exists!', 'error');
                    return;
                }
                
                const newUser = {
                    id: Date.now(),
                    name,
                    email,
                    password,
                    role,
                    phone,
                    status: 'active',
                    createdAt: new Date().toISOString()
                };
                
                users.push(newUser);
                localStorage.setItem('users', JSON.stringify(users));
                
                const modal = bootstrap.Modal.getInstance(document.getElementById('addUserModal'));
                modal.hide();
                
                this.showSection('users');
                this.showToast('User added successfully!', 'success');
            }

            editUser(id) {
                const users = JSON.parse(localStorage.getItem('users')) || [];
                const user = users.find(u => u.id === id);
                
                if (!user) return;
                
                // Populate edit form
                document.getElementById('editUserId').value = user.id;
                document.getElementById('editUserName').value = user.name;
                document.getElementById('editUserEmail').value = user.email;
                document.getElementById('editUserRole').value = user.role;
                document.getElementById('editUserPhone').value = user.phone || '';
                
                // Reset validation
                document.getElementById('editUserForm').classList.remove('was-validated');
                
                // Show modal
                const modal = new bootstrap.Modal(document.getElementById('editUserModal'));
                modal.show();
            }

            updateUser() {
                const form = document.getElementById('editUserForm');
                
                if (!form.checkValidity()) {
                    form.classList.add('was-validated');
                    return;
                }
                
                const id = parseInt(document.getElementById('editUserId').value);
                const name = document.getElementById('editUserName').value;
                const email = document.getElementById('editUserEmail').value;
                const password = document.getElementById('editUserPassword').value;
                const role = document.getElementById('editUserRole').value;
                const phone = document.getElementById('editUserPhone').value;
                
                const users = JSON.parse(localStorage.getItem('users')) || [];
                const userIndex = users.findIndex(u => u.id === id);
                
                if (userIndex === -1) {
                    this.showToast('User not found!', 'error');
                    return;
                }
                
                // Check if email is already used by another user
                const emailExists = users.some(u => u.email === email && u.id !== id);
                if (emailExists) {
                    this.showToast('Email already in use by another user!', 'error');
                    return;
                }
                
                // Update user
                users[userIndex].name = name;
                users[userIndex].email = email;
                users[userIndex].role = role;
                users[userIndex].phone = phone;
                
                // Update password only if provided
                if (password) {
                    users[userIndex].password = password;
                }
                
                localStorage.setItem('users', JSON.stringify(users));
                
                const modal = bootstrap.Modal.getInstance(document.getElementById('editUserModal'));
                modal.hide();
                
                this.showSection('users');
                this.showToast('User updated successfully!', 'success');
            }

            deleteUser(id) {
                if (confirm('Are you sure you want to delete this user?')) {
                    const users = JSON.parse(localStorage.getItem('users')) || [];
                    const filteredUsers = users.filter(u => u.id !== id);
                    localStorage.setItem('users', JSON.stringify(filteredUsers));
                    
                    this.showSection('users');
                    this.showToast('User deleted successfully!', 'success');
                }
            }

            toggleUserStatus(userId) {
                const users = JSON.parse(localStorage.getItem('users')) || [];
                const user = users.find(u => u.id == userId);
                
                if (user) {
                    user.status = user.status === 'active' ? 'inactive' : 'active';
                    localStorage.setItem('users', JSON.stringify(users));
                    this.showSection('users');
                    
                    const message = user.status === 'active' ? 
                        `User ${user.name} activated!` : `User ${user.name} deactivated!`;
                    this.showToast(message, 'success');
                }
            }

            searchUsers(query) {
                const rows = document.querySelectorAll('#usersTableBody tr');
                const searchTerm = query.toLowerCase();
                
                rows.forEach(row => {
                    const text = row.textContent.toLowerCase();
                    row.style.display = text.includes(searchTerm) ? '' : 'none';
                });
            }

            // RESTAURANT MANAGEMENT
            getRestaurantsManagement() {
                const restaurants = JSON.parse(localStorage.getItem('restaurants') || '[]');
                
                return `
                    <div class="content-card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h4><i class="fas fa-utensils me-2"></i>Manage Restaurants</h4>
                            <div class="d-flex flex-wrap">
                                <input type="text" class="form-control search-box me-2 mb-2" id="restaurantSearch" placeholder="Search restaurants..." onkeyup="adminPanel.searchRestaurants(this.value)">
                                <button class="btn btn-primary mb-2" data-bs-toggle="modal" data-bs-target="#addRestaurantModal">
                                    <i class="fas fa-plus me-2"></i>Add Restaurant
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Restaurant</th>
                                            <th>Cuisine</th>
                                            <th>Location</th>
                                            <th>Rating</th>
                                            <th>Delivery Time</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="restaurantsTableBody">
                                        ${restaurants.map(restaurant => `
                                            <tr>
                                                <td>
                                                    <div class="d-flex align-items-center">
                                                        <img src="${restaurant.image}" alt="${restaurant.name}" class="rounded me-3" style="width: 50px; height: 50px; object-fit: cover;">
                                                        <div>
                                                            <strong>${restaurant.name}</strong>
                                                            <br><small class="text-muted">${restaurant.description}</small>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td>${restaurant.cuisine}</td>
                                                <td>${restaurant.location}</td>
                                                <td>
                                                    <span class="badge bg-warning text-dark">
                                                        <i class="fas fa-star"></i> ${restaurant.rating}
                                                    </span>
                                                </td>
                                                <td>${restaurant.deliveryTime}</td>
                                                <td>
                                                    <span class="badge bg-${restaurant.status === 'active' ? 'success' : 'secondary'}">${restaurant.status}</span>
                                                </td>
                                                <td class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary" onclick="adminPanel.editRestaurant(${restaurant.id})" title="Edit">
                                                        <i class="fas fa-edit"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-danger" onclick="adminPanel.deleteRestaurant(${restaurant.id})" title="Delete">
                                                        <i class="fas fa-trash"></i>
                                                    </button>
                                                    <button class="btn btn-sm ${restaurant.status === 'active' ? 'btn-warning' : 'btn-success'}" onclick="adminPanel.toggleRestaurantStatus(${restaurant.id})" title="${restaurant.status === 'active' ? 'Deactivate' : 'Activate'}">
                                                        <i class="fas ${restaurant.status === 'active' ? 'fa-ban' : 'fa-check'}"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                        `).join('')}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                `;
            }

            saveRestaurant() {
                const name = document.getElementById('restaurantName').value;
                const cuisine = document.getElementById('restaurantCuisine').value;
                const location = document.getElementById('restaurantLocation').value;
                
                const restaurants = JSON.parse(localStorage.getItem('restaurants')) || [];
                
                const newRestaurant = {
                    id: Date.now(),
                    name,
                    cuisine,
                    location,
                    rating: 4.0,
                    deliveryTime: "30 mins",
                    status: 'active'
                };
                
                restaurants.push(newRestaurant);
                localStorage.setItem('restaurants', JSON.stringify(restaurants));
                
                const modal = bootstrap.Modal.getInstance(document.getElementById('addRestaurantModal'));
                modal.hide();
                
                this.showSection('restaurants');
                this.showToast('Restaurant added successfully!', 'success');
            }

            editRestaurant(id) {
                const restaurants = JSON.parse(localStorage.getItem('restaurants')) || [];
                const restaurant = restaurants.find(r => r.id === id);
                
                if (!restaurant) return;
                
                this.showToast(`Editing restaurant: ${restaurant.name}`, 'info');
            }

            deleteRestaurant(id) {
                if (confirm('Are you sure you want to delete this restaurant?')) {
                    const restaurants = JSON.parse(localStorage.getItem('restaurants')) || [];
                    const filteredRestaurants = restaurants.filter(r => r.id !== id);
                    localStorage.setItem('restaurants', JSON.stringify(filteredRestaurants));
                    
                    this.showSection('restaurants');
                    this.showToast('Restaurant deleted successfully!', 'success');
                }
            }

            toggleRestaurantStatus(restaurantId) {
                const restaurants = JSON.parse(localStorage.getItem('restaurants')) || [];
                const restaurant = restaurants.find(r => r.id == restaurantId);
                
                if (restaurant) {
                    restaurant.status = restaurant.status === 'active' ? 'inactive' : 'active';
                    localStorage.setItem('restaurants', JSON.stringify(restaurants));
                    this.showSection('restaurants');
                    
                    const message = restaurant.status === 'active' ? 
                        `Restaurant ${restaurant.name} activated!` : `Restaurant ${restaurant.name} deactivated!`;
                    this.showToast(message, 'success');
                }
            }

            searchRestaurants(query) {
                const rows = document.querySelectorAll('#restaurantsTableBody tr');
                const searchTerm = query.toLowerCase();
                
                rows.forEach(row => {
                    const text = row.textContent.toLowerCase();
                    row.style.display = text.includes(searchTerm) ? '' : 'none';
                });
            }

            // ORDER MANAGEMENT
            getOrdersManagement() {
                const orders = JSON.parse(localStorage.getItem('orders') || '[]');
                
                return `
                    <div class="content-card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h4><i class="fas fa-shopping-cart me-2"></i>Manage Orders</h4>
                            <div class="d-flex flex-wrap">
                                <input type="text" class="form-control search-box me-2 mb-2" id="orderSearch" placeholder="Search orders..." onkeyup="adminPanel.searchOrders(this.value)">
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Order ID</th>
                                            <th>Customer</th>
                                            <th>Restaurant</th>
                                            <th>Items</th>
                                            <th>Total</th>
                                            <th>Status</th>
                                            <th>Date</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="ordersTableBody">
                                        ${orders.map(order => `
                                            <tr>
                                                <td><strong>#${order.id}</strong></td>
                                                <td>${order.userName}</td>
                                                <td>${order.restaurantName}</td>
                                                <td>
                                                    <small>
                                                        ${order.items.map(item => `${item.name} (x${item.quantity})`).join(', ')}
                                                    </small>
                                                </td>
                                                <td>₹${order.total}</td>
                                                <td>
                                                    <select class="form-select form-select-sm" onchange="adminPanel.updateOrderStatus(${order.id}, this.value)">
                                                        <option value="pending" ${order.status === 'pending' ? 'selected' : ''}>Pending</option>
                                                        <option value="confirmed" ${order.status === 'confirmed' ? 'selected' : ''}>Confirmed</option>
                                                        <option value="preparing" ${order.status === 'preparing' ? 'selected' : ''}>Preparing</option>
                                                        <option value="out-for-delivery" ${order.status === 'out-for-delivery' ? 'selected' : ''}>Out for Delivery</option>
                                                        <option value="delivered" ${order.status === 'delivered' ? 'selected' : ''}>Delivered</option>
                                                        <option value="cancelled" ${order.status === 'cancelled' ? 'selected' : ''}>Cancelled</option>
                                                    </select>
                                                </td>
                                                <td>${new Date(order.date).toLocaleDateString()}</td>
                                                <td class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary" onclick="adminPanel.viewOrderDetails(${order.id})" title="View Details">
                                                        <i class="fas fa-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-danger" onclick="adminPanel.deleteOrder(${order.id})" title="Delete">
                                                        <i class="fas fa-trash"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                        `).join('')}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                `;
            }

            updateOrderStatus(orderId, newStatus) {
                const orders = JSON.parse(localStorage.getItem('orders') || '[]');
                const orderIndex = orders.findIndex(o => o.id == orderId);
                
                if (orderIndex !== -1) {
                    orders[orderIndex].status = newStatus;
                    localStorage.setItem('orders', JSON.stringify(orders));
                    this.showToast(`Order #${orderId} status updated to ${newStatus}`, 'success');
                }
            }

            viewOrderDetails(orderId) {
                const orders = JSON.parse(localStorage.getItem('orders') || '[]');
                const order = orders.find(o => o.id == orderId);
                
                if (order) {
                    const itemsList = order.items.map(item => 
                        `${item.name} x${item.quantity} - ₹${item.price * item.quantity}`
                    ).join('\n');
                    
                    alert(`Order Details:\n\nOrder ID: #${order.id}\nCustomer: ${order.userName}\nRestaurant: ${order.restaurantName}\nItems:\n${itemsList}\nTotal: ₹${order.total}\nStatus: ${order.status}\nDelivery Address: ${order.deliveryAddress}`);
                }
            }

            deleteOrder(orderId) {
                if (confirm('Are you sure you want to delete this order?')) {
                    const orders = JSON.parse(localStorage.getItem('orders') || '[]');
                    const filteredOrders = orders.filter(o => o.id !== orderId);
                    localStorage.setItem('orders', JSON.stringify(filteredOrders));
                    
                    this.showSection('orders');
                    this.showToast('Order deleted successfully!', 'success');
                }
            }

            searchOrders(query) {
                const rows = document.querySelectorAll('#ordersTableBody tr');
                const searchTerm = query.toLowerCase();
                
                rows.forEach(row => {
                    const text = row.textContent.toLowerCase();
                    row.style.display = text.includes(searchTerm) ? '' : 'none';
                });
            }

            // ANALYTICS
            getAnalytics() {
                const stats = this.getAdminStats();
                const orders = JSON.parse(localStorage.getItem('orders') || '[]');
                
                // Calculate order status distribution
                const statusCounts = {
                    pending: orders.filter(o => o.status === 'pending').length,
                    confirmed: orders.filter(o => o.status === 'confirmed').length,
                    preparing: orders.filter(o => o.status === 'preparing').length,
                    delivered: orders.filter(o => o.status === 'delivered').length,
                    cancelled: orders.filter(o => o.status === 'cancelled').length
                };
                
                return `
                    <div class="content-card">
                        <div class="card-header">
                            <h4><i class="fas fa-chart-bar me-2"></i>Analytics Dashboard</h4>
                        </div>
                        <div class="card-body">
                            <div class="row mb-4">
                                <div class="col-md-6">
                                    <h5>Order Status Distribution</h5>
                                    <div class="mt-3">
                                        <div class="d-flex justify-content-between mb-2">
                                            <span>Pending</span>
                                            <span class="badge bg-secondary">${statusCounts.pending}</span>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                            <span>Confirmed</span>
                                            <span class="badge bg-primary">${statusCounts.confirmed}</span>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                            <span>Preparing</span>
                                            <span class="badge bg-warning text-dark">${statusCounts.preparing}</span>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                            <span>Delivered</span>
                                            <span class="badge bg-success">${statusCounts.delivered}</span>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                            <span>Cancelled</span>
                                            <span class="badge bg-danger">${statusCounts.cancelled}</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <h5>Quick Stats</h5>
                                    <div class="mt-3">
                                        <div class="d-flex justify-content-between mb-2">
                                            <span>Total Revenue</span>
                                            <strong>₹${stats.totalRevenue}</strong>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                            <span>Average Order Value</span>
                                            <strong>₹${stats.totalOrders > 0 ? Math.round(stats.totalRevenue / stats.totalOrders) : 0}</strong>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                            <span>Active Restaurants</span>
                                            <strong>${stats.totalRestaurants}</strong>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                            <span>Registered Users</span>
                                            <strong>${stats.totalUsers}</strong>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="admin-actions mt-4">
                                <button class="btn btn-primary" onclick="adminPanel.exportData()">
                                    <i class="fas fa-download me-2"></i>Export Data
                                </button>
                                <button class="btn btn-success" onclick="adminPanel.generateReport()">
                                    <i class="fas fa-chart-pie me-2"></i>Generate Report
                                </button>
                                <button class="btn btn-info" onclick="adminPanel.viewInsights()">
                                    <i class="fas fa-lightbulb me-2"></i>View Insights
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }

            exportData() {
                this.showToast('Data export functionality would be implemented here', 'info');
            }

            generateReport() {
                this.showToast('Report generation functionality would be implemented here', 'info');
            }

            viewInsights() {
                this.showToast('Business insights functionality would be implemented here', 'info');
            }

            // UTILITY METHODS
            showToast(message, type = 'success') {
                const toastContainer = document.querySelector('.toast-container');
                
                const toast = document.createElement('div');
                toast.className = `toast align-items-center text-white bg-${type === 'success' ? 'success' : type === 'error' ? 'danger' : 'info'} border-0`;
                toast.setAttribute('role', 'alert');
                toast.setAttribute('aria-live', 'assertive');
                toast.setAttribute('aria-atomic', 'true');
                
                toast.innerHTML = `
                    <div class="d-flex">
                        <div class="toast-body">
                            ${message}
                        </div>
                        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
                    </div>
                `;
                
                toastContainer.appendChild(toast);
                
                const bsToast = new bootstrap.Toast(toast);
                bsToast.show();
                
                toast.addEventListener('hidden.bs.toast', () => {
                    toast.remove();
                });
            }

            showSettings() {
                this.showToast('Settings functionality would be implemented here', 'info');
            }
        }

        // Global functions for HTML onclick handlers
        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                localStorage.removeItem('adminUser');
                localStorage.removeItem('isAdmin');
                window.location.href = 'index.html';
            }
        }

        // Initialize admin panel when page loads
        document.addEventListener('DOMContentLoaded', function() {
            window.adminPanel = new AdminPanel();
        });
    </script>
</body>
</html>